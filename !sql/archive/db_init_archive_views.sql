CREATE OR REPLACE VIEW archive."vHouseKeepingDeleted" AS
	SELECT "idHouseKeeping" as id FROM hk."tDTEvents" WHERE "idDTEventTypes"=3;

CREATE OR REPLACE VIEW archive."vPlayListResolvedFull" AS 
		SELECT "pl.tItems".id,
				NULL::integer AS "idHK",
				"pl.tItems"."idStatuses",
				"pl.tItems"."idClasses",
				"pl.tItems"."idFiles",
				"pl.tItems"."sName",
				"pl.tItems"."sNote",
				"pl.tItems"."sStatusName",
				true AS "bLocked",
				"pl.tItems"."sClassName",
				"pl.tItems"."idStorages",
				"pl.tItems"."idStorageTypes",
				"pl.tItems"."sStorageTypeName",
				"pl.tItems"."sPath",
				"pl.tItems"."sStorageName",
				"pl.tItems"."bStorageEnabled",
				"pl.tItems"."sFilename",
				"pl.tItems"."dtLastFileEvent",
				"pl.tItems"."eFileError",
				"pl.tItems"."nFrameStart",
				"pl.tItems"."nFrameStop",
				"pl.tItems"."nFramesQty",
				"pl.tItems"."dtStartReal",
				"pl.tItems"."dtStopReal",
				"pl.tItems"."dtStartPlanned",
				"pl.tItems"."dtStartPlanned" + ((((("pl.tItems"."nFrameStop" - "pl.tItems"."nFrameStart" + 1) * 40)::text) || ' milliseconds'::text)::interval) AS "dtStopPlanned",
				"pl.tItems"."dtStartQueued",
				"pl.tItems"."dtStartHard",
				"pl.tItems"."dtStartSoft",
				"pl.tItems"."dtTimingsUpdate",
				"pl.tItems"."dtStartReal" AS "dtStart",
				"pl.tItems"."dtStopReal" AS "dtStop",
				"pl.tItems"."bPlug",
				"pl.tItems"."idAssets",
				"pl.tItems"."nBeepAdvBlockID",
				"pl.tItems"."nBeepClipBlockID",
				vv_asset."idVideoTypes",
				vv_asset."sVideoTypeName"
			FROM archive."pl.tItems"
				LEFT JOIN mam."vAssetsVideoTypes" vv_asset ON vv_asset.id = "pl.tItems"."idAssets"
	UNION
		SELECT "vPlayListResolved".id,
				"vPlayListResolved"."idHK",
				"vPlayListResolved"."idStatuses",
				"vPlayListResolved"."idClasses",
				"vPlayListResolved"."idFiles",
				"vPlayListResolved"."sName",
				"vPlayListResolved"."sNote",
				"vPlayListResolved"."sStatusName",
				"vPlayListResolved"."bLocked",
				"vPlayListResolved"."sClassName",
				"vPlayListResolved"."idStorages",
				"vPlayListResolved"."idStorageTypes",
				"vPlayListResolved"."sStorageTypeName",
				"vPlayListResolved"."sPath",
				"vPlayListResolved"."sStorageName",
				"vPlayListResolved"."bStorageEnabled",
				"vPlayListResolved"."sFilename",
				"vPlayListResolved"."dtLastFileEvent",
				"vPlayListResolved"."eFileError",
				"vPlayListResolved"."nFrameStart",
				"vPlayListResolved"."nFrameStop",
				"vPlayListResolved"."nFramesQty",
				"vPlayListResolved"."dtStartReal",
				"vPlayListResolved"."dtStopReal",
				"vPlayListResolved"."dtStartPlanned",
				"vPlayListResolved"."dtStopPlanned",
				"vPlayListResolved"."dtStartQueued",
				"vPlayListResolved"."dtStartHard",
				"vPlayListResolved"."dtStartSoft",
				"vPlayListResolved"."dtTimingsUpdate",
				"vPlayListResolved"."dtStart",
				"vPlayListResolved"."dtStop",
				"vPlayListResolved"."bPlug",
				"vPlayListResolved"."idAssets",
				"vPlayListResolved"."nBeepAdvBlockID",
				"vPlayListResolved"."nBeepClipBlockID",
				"vPlayListResolved"."idVideoTypes",
				"vPlayListResolved"."sVideoTypeName"
			FROM pl."vPlayListResolved";

CREATE OR REPLACE VIEW archive."vPlayListWithAssetsResolvedFull" AS 
	SELECT p.id, p."idHK", p."idStatuses", p."idClasses", p."idFiles", p."idStorages", p."idStorageTypes", p."sStorageTypeName", p."sPath", p."sStorageName", p."bStorageEnabled", p."sFilename", p."dtLastFileEvent", p."eFileError", p."sName", p."sNote", p."sStatusName", p."bLocked", p."sClassName", p."nFrameStart", p."nFrameStop", p."nFramesQty", p."dtStartPlanned", p."dtStopPlanned", p."dtStartHard", p."dtStartSoft", p."dtStartReal", p."dtStopReal", p."dtStart", p."dtStop", p."bPlug", p."nBeepAdvBlockID", p."nBeepClipBlockID", p."idAssets", a."sName" AS "sAssetName", a."idVideos", a."sVideoName", a."idVideoTypes", a."sVideoTypeName", a."nPersonsQty", a."nAlbumsQty", a."nStylesQty", a."idRotations", a."sRotationName", a."idPalettes", a."sPaletteName", a."idSoundLevelsForStart", a."sSoundLevelNameForStart", a."idSoundLevelsForStop", a."sSoundLevelNameForStop", a."idCues", a."sCueSong", a."sCueArtist", a."sCueAlbum", a."nCueYear", a."sCuePossessor", a."nFramesQty" AS "nAssetFramesQty", a."nFrameIn", a."nFrameOut", a."dtLastPlayed", a."bPLEnabled", a."nTestatorClassID"
		FROM archive."vPlayListResolvedFull" p
			LEFT JOIN mam."vAssetsResolved" a ON p."idAssets" = a.id;
